:github_url: hide

.. _class_RefCounted:

RefCounted
==========

**H√©rite de‚ÄØ:** :ref:`Object<class_Object>`

**H√©rit√© par¬†:** :ref:`AESContext<class_AESContext>`, :ref:`AStar2D<class_AStar2D>`, :ref:`AStar3D<class_AStar3D>`, :ref:`AStarGrid2D<class_AStarGrid2D>`, :ref:`AudioEffectInstance<class_AudioEffectInstance>`, :ref:`AudioSample<class_AudioSample>`, :ref:`AudioSamplePlayback<class_AudioSamplePlayback>`, :ref:`AudioStreamPlayback<class_AudioStreamPlayback>`, :ref:`CameraFeed<class_CameraFeed>`, :ref:`CharFXTransform<class_CharFXTransform>`, :ref:`ConfigFile<class_ConfigFile>`, :ref:`Crypto<class_Crypto>`, :ref:`DirAccess<class_DirAccess>`, :ref:`DTLSServer<class_DTLSServer>`, :ref:`EditorContextMenuPlugin<class_EditorContextMenuPlugin>`, :ref:`EditorDebuggerPlugin<class_EditorDebuggerPlugin>`, :ref:`EditorDebuggerSession<class_EditorDebuggerSession>`, :ref:`EditorExportPlatform<class_EditorExportPlatform>`, :ref:`EditorExportPlugin<class_EditorExportPlugin>`, :ref:`EditorExportPreset<class_EditorExportPreset>`, :ref:`EditorFeatureProfile<class_EditorFeatureProfile>`, :ref:`EditorFileSystemImportFormatSupportQuery<class_EditorFileSystemImportFormatSupportQuery>`, :ref:`EditorInspectorPlugin<class_EditorInspectorPlugin>`, :ref:`EditorResourceConversionPlugin<class_EditorResourceConversionPlugin>`, :ref:`EditorResourcePreviewGenerator<class_EditorResourcePreviewGenerator>`, :ref:`EditorResourceTooltipPlugin<class_EditorResourceTooltipPlugin>`, :ref:`EditorSceneFormatImporter<class_EditorSceneFormatImporter>`, :ref:`EditorScenePostImport<class_EditorScenePostImport>`, :ref:`EditorScenePostImportPlugin<class_EditorScenePostImportPlugin>`, :ref:`EditorScript<class_EditorScript>`, :ref:`EditorTranslationParserPlugin<class_EditorTranslationParserPlugin>`, :ref:`EncodedObjectAsID<class_EncodedObjectAsID>`, :ref:`ENetConnection<class_ENetConnection>`, :ref:`EngineProfiler<class_EngineProfiler>`, :ref:`Expression<class_Expression>`, :ref:`FileAccess<class_FileAccess>`, :ref:`GLTFObjectModelProperty<class_GLTFObjectModelProperty>`, :ref:`HashingContext<class_HashingContext>`, :ref:`HMACContext<class_HMACContext>`, :ref:`HTTPClient<class_HTTPClient>`, :ref:`ImageFormatLoader<class_ImageFormatLoader>`, :ref:`JavaClass<class_JavaClass>`, :ref:`JavaObject<class_JavaObject>`, :ref:`JavaScriptObject<class_JavaScriptObject>`, :ref:`KinematicCollision2D<class_KinematicCollision2D>`, :ref:`KinematicCollision3D<class_KinematicCollision3D>`, :ref:`Lightmapper<class_Lightmapper>`, :ref:`Logger<class_Logger>`, :ref:`MeshConvexDecompositionSettings<class_MeshConvexDecompositionSettings>`, :ref:`MeshDataTool<class_MeshDataTool>`, :ref:`MultiplayerAPI<class_MultiplayerAPI>`, :ref:`Mutex<class_Mutex>`, :ref:`NavigationPathQueryParameters2D<class_NavigationPathQueryParameters2D>`, :ref:`NavigationPathQueryParameters3D<class_NavigationPathQueryParameters3D>`, :ref:`NavigationPathQueryResult2D<class_NavigationPathQueryResult2D>`, :ref:`NavigationPathQueryResult3D<class_NavigationPathQueryResult3D>`, :ref:`Node3DGizmo<class_Node3DGizmo>`, :ref:`OggPacketSequencePlayback<class_OggPacketSequencePlayback>`, :ref:`OpenXRAPIExtension<class_OpenXRAPIExtension>`, :ref:`OpenXRFutureResult<class_OpenXRFutureResult>`, :ref:`PackedDataContainerRef<class_PackedDataContainerRef>`, :ref:`PacketPeer<class_PacketPeer>`, :ref:`PCKPacker<class_PCKPacker>`, :ref:`PhysicsPointQueryParameters2D<class_PhysicsPointQueryParameters2D>`, :ref:`PhysicsPointQueryParameters3D<class_PhysicsPointQueryParameters3D>`, :ref:`PhysicsRayQueryParameters2D<class_PhysicsRayQueryParameters2D>`, :ref:`PhysicsRayQueryParameters3D<class_PhysicsRayQueryParameters3D>`, :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`, :ref:`PhysicsShapeQueryParameters3D<class_PhysicsShapeQueryParameters3D>`, :ref:`PhysicsTestMotionParameters2D<class_PhysicsTestMotionParameters2D>`, :ref:`PhysicsTestMotionParameters3D<class_PhysicsTestMotionParameters3D>`, :ref:`PhysicsTestMotionResult2D<class_PhysicsTestMotionResult2D>`, :ref:`PhysicsTestMotionResult3D<class_PhysicsTestMotionResult3D>`, :ref:`RandomNumberGenerator<class_RandomNumberGenerator>`, :ref:`RDAttachmentFormat<class_RDAttachmentFormat>`, :ref:`RDFramebufferPass<class_RDFramebufferPass>`, :ref:`RDPipelineColorBlendState<class_RDPipelineColorBlendState>`, :ref:`RDPipelineColorBlendStateAttachment<class_RDPipelineColorBlendStateAttachment>`, :ref:`RDPipelineDepthStencilState<class_RDPipelineDepthStencilState>`, :ref:`RDPipelineMultisampleState<class_RDPipelineMultisampleState>`, :ref:`RDPipelineRasterizationState<class_RDPipelineRasterizationState>`, :ref:`RDPipelineSpecializationConstant<class_RDPipelineSpecializationConstant>`, :ref:`RDSamplerState<class_RDSamplerState>`, :ref:`RDShaderSource<class_RDShaderSource>`, :ref:`RDTextureFormat<class_RDTextureFormat>`, :ref:`RDTextureView<class_RDTextureView>`, :ref:`RDUniform<class_RDUniform>`, :ref:`RDVertexAttribute<class_RDVertexAttribute>`, :ref:`RegEx<class_RegEx>`, :ref:`RegExMatch<class_RegExMatch>`, :ref:`RenderSceneBuffers<class_RenderSceneBuffers>`, :ref:`RenderSceneBuffersConfiguration<class_RenderSceneBuffersConfiguration>`, :ref:`Resource<class_Resource>`, :ref:`ResourceFormatLoader<class_ResourceFormatLoader>`, :ref:`ResourceFormatSaver<class_ResourceFormatSaver>`, :ref:`ResourceImporter<class_ResourceImporter>`, :ref:`SceneState<class_SceneState>`, :ref:`SceneTreeTimer<class_SceneTreeTimer>`, :ref:`ScriptBacktrace<class_ScriptBacktrace>`, :ref:`Semaphore<class_Semaphore>`, :ref:`SkinReference<class_SkinReference>`, :ref:`StreamPeer<class_StreamPeer>`, :ref:`SurfaceTool<class_SurfaceTool>`, :ref:`TCPServer<class_TCPServer>`, :ref:`TextLine<class_TextLine>`, :ref:`TextParagraph<class_TextParagraph>`, :ref:`TextServer<class_TextServer>`, :ref:`Thread<class_Thread>`, :ref:`TLSOptions<class_TLSOptions>`, :ref:`TranslationDomain<class_TranslationDomain>`, :ref:`TriangleMesh<class_TriangleMesh>`, :ref:`Tween<class_Tween>`, :ref:`Tweener<class_Tweener>`, :ref:`UDPServer<class_UDPServer>`, :ref:`UPNP<class_UPNP>`, :ref:`UPNPDevice<class_UPNPDevice>`, :ref:`WeakRef<class_WeakRef>`, :ref:`WebRTCPeerConnection<class_WebRTCPeerConnection>`, :ref:`XMLParser<class_XMLParser>`, :ref:`XRInterface<class_XRInterface>`, :ref:`XRPose<class_XRPose>`, :ref:`XRTracker<class_XRTracker>`, :ref:`ZIPPacker<class_ZIPPacker>`, :ref:`ZIPReader<class_ZIPReader>`

Classe de base pour les objets avec r√©f√©rences compt√©es.

.. rst-class:: classref-introduction-group

Description
-----------

Classe de base pour tout objet qui conserve un compte de r√©f√©rences. :ref:`Resource<class_Resource>` et beaucoup d'autres objets d'aide h√©ritent de cette classe.

Contrairement aux autres types :ref:`Object<class_Object>`, les **RefCounted**\ s conservent un compteur de r√©f√©rence interne afin qu'ils soient automatiquement lib√©r√©s lorsqu'ils ne sont plus utilis√©s, et seulement l√†. Les **RefCounted**\ s n'ont donc pas besoin d'√™tre lib√©r√©s manuellement avec :ref:`Object.free()<class_Object_method_free>`.

Les instances **RefCounted** prises dans une r√©f√©rence cyclique ne seront **pas** automatiquement lib√©r√©es. Par exemple, si un n≈ìud contient une r√©f√©rence √† une instance ``A``, qui contient directement ou indirectement une r√©f√©rence √† ``A``, le compte de r√©f√©rences de ``A`` sera de 2. La destruction du n≈ìud laissera ``A`` avec un compteur de r√©f√©rences de 1, et il y aura une fuite de m√©moire. Pour √©viter cela, l'une des r√©f√©rences du cycle peut √™tre rendue faible avec :ref:`@GlobalScope.weakref()<class_@GlobalScope_method_weakref>`.

Dans la grande majorit√© des cas d'utilisation, l'instanciation et l'utilisation de types d√©riv√©s de **RefCounted** est tout ce que vous devez faire. Les m√©thodes fournies dans cette classe ne sont que pour les utilisateurs avanc√©s, et peuvent causer des probl√®mes si mal utilis√©es.

\ **Note¬†:** En C#, les objets avec un compteur de r√©f√©rences ne seront pas lib√©r√©s instantan√©ment apr√®s qu'ils ne soient plus utilis√©s. Au lieu de cela, le ramasse-miette s'ex√©cutera p√©riodiquement et lib√©rera les objets r√©f√©renc√©s qui ne sont plus utilis√©s. Cela signifie que les objets non utilis√©s resteront en m√©moire pendant un certain temps avant d'√™tre supprim√©es.

.. rst-class:: classref-introduction-group

Tutoriels
------------------

- :doc:`Quand et comment √©viter d'utiliser des n≈ìuds pour tout <../tutorials/best_practices/node_alternatives>`

.. rst-class:: classref-reftable-group

M√©thodes
----------------

.. table::
   :widths: auto

   +-------------------------+---------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`   | :ref:`get_reference_count<class_RefCounted_method_get_reference_count>`\ (\ ) |const| |
   +-------------------------+---------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>` | :ref:`init_ref<class_RefCounted_method_init_ref>`\ (\ )                               |
   +-------------------------+---------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>` | :ref:`reference<class_RefCounted_method_reference>`\ (\ )                             |
   +-------------------------+---------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>` | :ref:`unreference<class_RefCounted_method_unreference>`\ (\ )                         |
   +-------------------------+---------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

Descriptions des m√©thodes
--------------------------------------------------

.. _class_RefCounted_method_get_reference_count:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_reference_count**\ (\ ) |const| :ref:`üîó<class_RefCounted_method_get_reference_count>`

Renvoie le compte de r√©f√©rences actuel.

.. rst-class:: classref-item-separator

----

.. _class_RefCounted_method_init_ref:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **init_ref**\ (\ ) :ref:`üîó<class_RefCounted_method_init_ref>`

Initialise le compteur de r√©f√©rences interne. Utilisez ceci seulement si vous savez vraiment ce que vous faites.

Renvoie si l'initialisation a √©t√© r√©ussie.

.. rst-class:: classref-item-separator

----

.. _class_RefCounted_method_reference:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **reference**\ (\ ) :ref:`üîó<class_RefCounted_method_reference>`

Incr√©mente le compteur de r√©f√©rences interne. Utilisez ceci seulement si vous savez vraiment ce que vous faites.

Renvoie ``true`` si l'incr√©mentation a r√©ussi, ``false`` sinon.

.. rst-class:: classref-item-separator

----

.. _class_RefCounted_method_unreference:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **unreference**\ (\ ) :ref:`üîó<class_RefCounted_method_unreference>`

D√©cr√©mente le compteur de r√©f√©rences interne. Utilisez ceci seulement si vous savez vraiment ce que vous faites.

Renvoie ``true`` si l'objet devrait √™tre lib√©r√© apr√®s la d√©cr√©mentation, ``false`` sinon.

.. |virtual| replace:: :abbr:`virtual (Cette m√©thode doit typiquement √™tre red√©finie par l'utilisateur pour avoir un effet.)`
.. |required| replace:: :abbr:`required (This method is required to be overridden when extending its base class.)`
.. |const| replace:: :abbr:`const (Cette m√©thode n'a pas d'effets de bord. Elle ne modifie aucune des variables membres de l'instance.)`
.. |vararg| replace:: :abbr:`vararg (Cette m√©thode accepte n'importe quel nombre d'arguments apr√®s ceux d√©cris ici.)`
.. |constructor| replace:: :abbr:`constructor (Cette m√©thode est utilis√©e pour construire un type.)`
.. |static| replace:: :abbr:`static (Cette m√©thode n'a pas besoin d'instance pour √™tre appel√©e, elle peut donc √™tre directement appel√©e en utilisant le nom de la classe.)`
.. |operator| replace:: :abbr:`operator (Cette m√©thode d√©crit un op√©rateur valide √† utiliser avec ce type en tant qu'op√©rande gauche.)`
.. |bitfield| replace:: :abbr:`BitField (Cette valeur est un nombre entier compos√© d'un masque de bits des options suivantes.)`
.. |void| replace:: :abbr:`void (Aucune valeur de retour.)`
