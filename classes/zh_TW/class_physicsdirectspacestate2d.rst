:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/PhysicsDirectSpaceState2D.xml.

.. _class_PhysicsDirectSpaceState2D:

PhysicsDirectSpaceState2D
=========================

**ç¹¼æ‰¿ï¼š** :ref:`Object<class_Object>`

**è¢«ç¹¼æ‰¿ï¼š** :ref:`PhysicsDirectSpaceState2DExtension<class_PhysicsDirectSpaceState2DExtension>`

æä¾›å° :ref:`PhysicsServer2D<class_PhysicsServer2D>` ä¸­ç‰©ç†ç©ºé–“çš„ç›´æ¥å­˜å–ã€‚

.. rst-class:: classref-introduction-group

èªªæ˜
----

Provides direct access to a physics space in the :ref:`PhysicsServer2D<class_PhysicsServer2D>`. It's used mainly to do queries against objects and areas residing in a given space.

\ **Note:** This class is not meant to be instantiated directly. Use :ref:`World2D.direct_space_state<class_World2D_property_direct_space_state>` to get the world's physics 2D space state.

.. rst-class:: classref-introduction-group

æ•™å­¸
----

- :doc:`ç‰©ç†ä»‹ç´¹ <../tutorials/physics/physics_introduction>`

- :doc:`ç™¼å°„å°„ç·š <../tutorials/physics/ray-casting>`

.. rst-class:: classref-reftable-group

æ–¹æ³•
----

.. table::
   :widths: auto

   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`PackedFloat32Array<class_PackedFloat32Array>`              | :ref:`cast_motion<class_PhysicsDirectSpaceState2D_method_cast_motion>`\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`\ )                                                   |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Array<class_Array>`\[:ref:`Vector2<class_Vector2>`\]       | :ref:`collide_shape<class_PhysicsDirectSpaceState2D_method_collide_shape>`\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ )     |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Dictionary<class_Dictionary>`                              | :ref:`get_rest_info<class_PhysicsDirectSpaceState2D_method_get_rest_info>`\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`\ )                                               |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Array<class_Array>`\[:ref:`Dictionary<class_Dictionary>`\] | :ref:`intersect_point<class_PhysicsDirectSpaceState2D_method_intersect_point>`\ (\ parameters\: :ref:`PhysicsPointQueryParameters2D<class_PhysicsPointQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ ) |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Dictionary<class_Dictionary>`                              | :ref:`intersect_ray<class_PhysicsDirectSpaceState2D_method_intersect_ray>`\ (\ parameters\: :ref:`PhysicsRayQueryParameters2D<class_PhysicsRayQueryParameters2D>`\ )                                                   |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Array<class_Array>`\[:ref:`Dictionary<class_Dictionary>`\] | :ref:`intersect_shape<class_PhysicsDirectSpaceState2D_method_intersect_shape>`\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ ) |
   +------------------------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æ–¹æ³•èªªæ˜
--------

.. _class_PhysicsDirectSpaceState2D_method_cast_motion:

.. rst-class:: classref-method

:ref:`PackedFloat32Array<class_PackedFloat32Array>` **cast_motion**\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_cast_motion>`

æª¢æŸ¥ :ref:`Shape2D<class_Shape2D>` èƒ½å¤ åœ¨ä¸ç™¼ç”Ÿç¢°æ’çš„æƒ…æ³ä¸‹ç§»å‹•å¤šé ã€‚åŒ…æ‹¬å½¢ç‹€å’Œé‹å‹•åœ¨å…§çš„æ‰€æœ‰æŸ¥è©¢åƒæ•¸éƒ½é€šé :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>` ç‰©ä»¶æä¾›ã€‚

è¿”å›åŒ…å«è©²é‹å‹•çš„å®‰å…¨å’Œä¸å®‰å…¨æ¯”ä¾‹ï¼ˆåœ¨ 0 å’Œ 1 ä¹‹é–“ï¼‰çš„é™£åˆ—ã€‚å®‰å…¨æ¯”ä¾‹æ˜¯è©²é‹å‹•èƒ½å¤ ä¸ç™¼ç”Ÿç¢°æ’çš„æœ€å¤§åˆ†æ•¸ã€‚ä¸å®‰å…¨æ¯”ä¾‹æ˜¯ç™¼ç”Ÿç¢°æ’æ‰€éœ€çš„æœ€å°åˆ†æ•¸ã€‚å¦‚æœæ²’æœ‰åµæ¸¬åˆ°ç¢°æ’ï¼Œå‰‡è¿”å›çš„çµæœç‚º ``[1.0, 1.0]``\ ã€‚

\ **æ³¨æ„ï¼š**\ è©²å½¢ç‹€å·²ç¢°æ’çš„ :ref:`Shape2D<class_Shape2D>` æœƒè¢«å¿½ç•¥ï¼Œä¾‹å¦‚å½¢ç‹€åœ¨å…¶å…§éƒ¨ã€‚è«‹ä½¿ç”¨ :ref:`collide_shape()<class_PhysicsDirectSpaceState2D_method_collide_shape>` ç¢ºå®šè©²å½¢ç‹€å·²ç¢°æ’çš„ :ref:`Shape2D<class_Shape2D>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PhysicsDirectSpaceState2D_method_collide_shape:

.. rst-class:: classref-method

:ref:`Array<class_Array>`\[:ref:`Vector2<class_Vector2>`\] **collide_shape**\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_collide_shape>`

æª¢æŸ¥é€šé :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>` ç‰©ä»¶çµ¦å‡ºçš„ä¸€å€‹å½¢ç‹€èˆ‡è©²ç©ºé–“çš„äº¤é»ã€‚çµæœé™£åˆ—åŒ…å«è©²å½¢ç‹€èˆ‡å¦ä¸€å€‹å½¢ç‹€ç›¸äº¤è™•çš„é»çš„åˆ—è¡¨ã€‚èˆ‡ :ref:`intersect_shape()<class_PhysicsDirectSpaceState2D_method_intersect_shape>` ä¸€æ¨£ï¼Œå¯ä»¥é™åˆ¶è¿”å›çµæœçš„æ•¸é‡ä»¥ç¯€çœè™•ç†æ™‚é–“ã€‚

è¿”å›çš„é»æ˜¯æ¥è§¸é»å°çš„ä¸€å€‹åˆ—è¡¨ã€‚å°æ–¼æ¯ä¸€å°ï¼Œç¬¬ä¸€å€‹æ˜¯åœ¨ :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>` å°è±¡ä¸­å‚³éçš„å½¢ç‹€ï¼Œç¬¬äºŒå€‹æ˜¯ä¾†è‡ªç‰©ç†ç©ºé–“çš„ç¢°æ’å½¢ç‹€ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PhysicsDirectSpaceState2D_method_get_rest_info:

.. rst-class:: classref-method

:ref:`Dictionary<class_Dictionary>` **get_rest_info**\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_get_rest_info>`

Checks the intersections of a shape, given through a :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>` object, against the space. If it collides with more than one shape, the nearest one is selected. The returned object is a dictionary containing the following fields:

\ ``collider_id``: The colliding object's ID.

\ ``linear_velocity``: The colliding object's velocity :ref:`Vector2<class_Vector2>`. If the object is an :ref:`Area2D<class_Area2D>`, the result is ``(0, 0)``.

\ ``normal``: The collision normal of the query shape at the intersection point, pointing away from the intersecting object.

\ ``point``: The intersection point.

\ ``rid``: The intersecting object's :ref:`RID<class_RID>`.

\ ``shape``: The shape index of the colliding shape.

If the shape did not intersect anything, then an empty dictionary is returned instead.

.. rst-class:: classref-item-separator

----

.. _class_PhysicsDirectSpaceState2D_method_intersect_point:

.. rst-class:: classref-method

:ref:`Array<class_Array>`\[:ref:`Dictionary<class_Dictionary>`\] **intersect_point**\ (\ parameters\: :ref:`PhysicsPointQueryParameters2D<class_PhysicsPointQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_intersect_point>`

æª¢æŸ¥é»æ˜¯å¦åœ¨ä»»ä½•å¯¦é«”å½¢ç‹€å…§ã€‚ä½ç½®å’Œå…¶ä»–åƒæ•¸é€šé :ref:`PhysicsPointQueryParameters2D<class_PhysicsPointQueryParameters2D>` å®šç¾©ã€‚é»æ‰€åœ¨çš„å½¢ç‹€åœ¨åŒ…å«å…·æœ‰ä»¥ä¸‹æ¬„ä½çš„å­—å…¸çš„é™£åˆ—ä¸­è¿”å›ï¼š

\ ``collider``\ ï¼šç¢°æ’å°è±¡ã€‚

\ ``collider_id``\ ï¼šç¢°æ’å°è±¡çš„ IDã€‚

\ ``rid``\ ï¼šç›¸äº¤å°è±¡çš„ :ref:`RID<class_RID>`\ ã€‚

\ ``shape``\ ï¼šç¢°æ’å½¢ç‹€çš„å½¢ç‹€ç´¢å¼•ã€‚

å¯ä»¥ä½¿ç”¨ ``max_results`` åƒæ•¸é™åˆ¶ç›¸äº¤çš„æ•¸é‡ï¼Œä»¥æ¸›å°‘è™•ç†æ™‚é–“ã€‚

\ **æ³¨æ„ï¼š**\ åœ¨ ``Segments`` å»ºæ§‹æ¨¡å¼ä¸‹ï¼Œ\ :ref:`ConcavePolygonShape2D<class_ConcavePolygonShape2D>` å’Œ :ref:`CollisionPolygon2D<class_CollisionPolygon2D>` ä¸æ˜¯å¯¦é«”å½¢ç‹€ã€‚å› æ­¤ï¼Œå®ƒå€‘ä¸æœƒè¢«åµæ¸¬åˆ°ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PhysicsDirectSpaceState2D_method_intersect_ray:

.. rst-class:: classref-method

:ref:`Dictionary<class_Dictionary>` **intersect_ray**\ (\ parameters\: :ref:`PhysicsRayQueryParameters2D<class_PhysicsRayQueryParameters2D>`\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_intersect_ray>`

èˆ‡ä¸€å€‹çµ¦å®šç©ºé–“ä¸­çš„ä¸€å€‹å°„ç·šç›¸äº¤ã€‚å°„ç·šä½ç½®å’Œå…¶ä»–åƒæ•¸é€šé :ref:`PhysicsRayQueryParameters2D<class_PhysicsRayQueryParameters2D>` å®šç¾©ã€‚è¿”å›çš„ç‰©ä»¶æ˜¯ä¸€å€‹åŒ…å«ä»¥ä¸‹æ¬„ä½çš„å­—å…¸ï¼š

\ ``collider``\ ï¼šè©²ç¢°æ’å°è±¡ã€‚

\ ``collider_id``\ ï¼šè©²ç¢°æ’å°è±¡çš„ IDã€‚

\ ``normal``\ ï¼šåœ¨ç›¸äº¤é»è™•è©²å°è±¡çš„è¡¨é¢æ³•ç·šï¼›å¦‚æœå°„ç·šå¾å½¢ç‹€å…§éƒ¨é–‹å§‹ï¼Œä¸¦ä¸” :ref:`PhysicsRayQueryParameters2D.hit_from_inside<class_PhysicsRayQueryParameters2D_property_hit_from_inside>` ç‚º ``true``\ ï¼Œå‰‡ç‚º ``Vector2(0, 0)``\ ã€‚

\ ``position``\ ï¼šè©²ç›¸äº¤é»ã€‚

\ ``rid``\ ï¼šè©²ç›¸äº¤å°è±¡çš„ :ref:`RID<class_RID>`\ ã€‚

\ ``shape``\ ï¼šè©²ç¢°æ’å½¢ç‹€çš„å½¢ç‹€ç´¢å¼•ã€‚

å¦‚æœå°„ç·šæ²’æœ‰èˆ‡ä»»ä½•æ±è¥¿ç›¸äº¤ï¼Œå‰‡è¿”å›ä¸€å€‹ç©ºå­—å…¸ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PhysicsDirectSpaceState2D_method_intersect_shape:

.. rst-class:: classref-method

:ref:`Array<class_Array>`\[:ref:`Dictionary<class_Dictionary>`\] **intersect_shape**\ (\ parameters\: :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>`, max_results\: :ref:`int<class_int>` = 32\ ) :ref:`ğŸ”—<class_PhysicsDirectSpaceState2D_method_intersect_shape>`

æª¢æŸ¥é€šé :ref:`PhysicsShapeQueryParameters2D<class_PhysicsShapeQueryParameters2D>` ç‰©ä»¶çµ¦å‡ºçš„å½¢ç‹€èˆ‡ç©ºé–“çš„äº¤é»ã€‚ç›¸äº¤çš„å½¢ç‹€æœƒä»¥é™£åˆ—çš„å½¢å¼è¿”å›ï¼Œè©²é™£åˆ—åŒ…å«æœ‰ä»¥ä¸‹æ¬„ä½çš„å­—å…¸ï¼š

\ ``collider``\ ï¼šç¢°æ’å°è±¡ã€‚

\ ``collider_id``\ ï¼šç¢°æ’å°è±¡çš„ IDã€‚

\ ``rid``\ ï¼šç›¸äº¤å°è±¡çš„\ :ref:`RID<class_RID>`\ ã€‚

\ ``shape``\ ï¼šç¢°æ’å½¢ç‹€çš„å½¢ç‹€ç´¢å¼•ã€‚

å¯ä»¥ä½¿ç”¨ ``max_results`` åƒæ•¸é™åˆ¶ç›¸äº¤çš„æ•¸é‡ï¼Œä»¥æ¸›å°‘è™•ç†æ™‚é–“ã€‚

.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ä½¿ç”¨è€…è¦†å¯«æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |required| replace:: :abbr:`required (This method is required to be overridden when extending its base class.)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ²’æœ‰å‰¯ä½œç”¨ã€‚ä¸æœƒä¿®æ”¹è©²å¯¦ä¾‹çš„ä»»ä½•æˆå“¡è®Šæ•¸ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†é€™è£¡æè¿°çš„åƒæ•¸å¤–ï¼Œé‚„å¯ä»¥æ¥å—ä»»æ„æ•¸é‡çš„åƒæ•¸ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨æ–¼å»ºæ§‹ä¸€å€‹å‹åˆ¥ã€‚)`
.. |static| replace:: :abbr:`static (æœ¬æ–¹æ³•ç„¡éœ€å¯¦ä¾‹å³å¯å‘¼å«ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨é¡åˆ¥åç¨±å‘¼å«ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°å°‡æœ¬å‹åˆ¥ä½œç‚ºå·¦é‹ç®—å…ƒæ™‚å¯ç”¨çš„æœ‰æ•ˆé‹ç®—å­ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (æ­¤å€¼æ˜¯ç”±ä¸‹åˆ—æ——æ¨™çµ„æˆçš„ä½å…ƒé®ç½©æ•´æ•¸ã€‚)`
.. |void| replace:: :abbr:`void (ç„¡å›å‚³å€¼ã€‚)`
