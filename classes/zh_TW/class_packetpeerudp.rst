:github_url: hide

.. DO NOT EDIT THIS FILE!!!
.. Generated automatically from Godot engine sources.
.. Generator: https://github.com/godotengine/godot/tree/master/doc/tools/make_rst.py.
.. XML source: https://github.com/godotengine/godot/tree/master/doc/classes/PacketPeerUDP.xml.

.. _class_PacketPeerUDP:

PacketPeerUDP
=============

**ç¹¼æ‰¿ï¼š** :ref:`PacketPeer<class_PacketPeer>` **<** :ref:`RefCounted<class_RefCounted>` **<** :ref:`Object<class_Object>`

UDP è³‡æ–™åŒ…ä½¿ç”¨è€…ç«¯ã€‚

.. rst-class:: classref-introduction-group

èªªæ˜
----

UDP packet peer. Can be used to send and receive raw UDP packets as well as :ref:`Variant<class_Variant>`\ s.

\ **Example:** Send a packet:

::

    var peer = PacketPeerUDP.new()

    # Optionally, you can select the local port used to send the packet.
    peer.bind(4444)

    peer.set_dest_address("1.1.1.1", 4433)
    peer.put_packet("hello".to_utf8_buffer())

\ **Example:** Listen for packets:

::

    var peer

    func _ready():
        peer = PacketPeerUDP.new()
        peer.bind(4433)


    func _process(_delta):
        if peer.get_available_packet_count() > 0:
            var array_bytes = peer.get_packet()
            var packet_string = array_bytes.get_string_from_ascii()
            print("Received message: ", packet_string)

\ **Note:** When exporting to Android, make sure to enable the ``INTERNET`` permission in the Android export preset before exporting the project or using one-click deploy. Otherwise, network communication of any kind will be blocked by Android.

.. rst-class:: classref-reftable-group

æ–¹æ³•
----

.. table::
   :widths: auto

   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`bind<class_PacketPeerUDP_method_bind>`\ (\ port\: :ref:`int<class_int>`, bind_address\: :ref:`String<class_String>` = "*", recv_buf_size\: :ref:`int<class_int>` = 65536\ )   |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                | :ref:`close<class_PacketPeerUDP_method_close>`\ (\ )                                                                                                                                |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`connect_to_host<class_PacketPeerUDP_method_connect_to_host>`\ (\ host\: :ref:`String<class_String>`, port\: :ref:`int<class_int>`\ )                                          |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                 | :ref:`get_local_port<class_PacketPeerUDP_method_get_local_port>`\ (\ ) |const|                                                                                                      |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`String<class_String>`           | :ref:`get_packet_ip<class_PacketPeerUDP_method_get_packet_ip>`\ (\ ) |const|                                                                                                        |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`int<class_int>`                 | :ref:`get_packet_port<class_PacketPeerUDP_method_get_packet_port>`\ (\ ) |const|                                                                                                    |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`               | :ref:`is_bound<class_PacketPeerUDP_method_is_bound>`\ (\ ) |const|                                                                                                                  |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`bool<class_bool>`               | :ref:`is_socket_connected<class_PacketPeerUDP_method_is_socket_connected>`\ (\ ) |const|                                                                                            |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`join_multicast_group<class_PacketPeerUDP_method_join_multicast_group>`\ (\ multicast_address\: :ref:`String<class_String>`, interface_name\: :ref:`String<class_String>`\ )   |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`leave_multicast_group<class_PacketPeerUDP_method_leave_multicast_group>`\ (\ multicast_address\: :ref:`String<class_String>`, interface_name\: :ref:`String<class_String>`\ ) |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | |void|                                | :ref:`set_broadcast_enabled<class_PacketPeerUDP_method_set_broadcast_enabled>`\ (\ enabled\: :ref:`bool<class_bool>`\ )                                                             |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`set_dest_address<class_PacketPeerUDP_method_set_dest_address>`\ (\ host\: :ref:`String<class_String>`, port\: :ref:`int<class_int>`\ )                                        |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Error<enum_@GlobalScope_Error>` | :ref:`wait<class_PacketPeerUDP_method_wait>`\ (\ )                                                                                                                                  |
   +---------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. rst-class:: classref-section-separator

----

.. rst-class:: classref-descriptions-group

æ–¹æ³•èªªæ˜
--------

.. _class_PacketPeerUDP_method_bind:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **bind**\ (\ port\: :ref:`int<class_int>`, bind_address\: :ref:`String<class_String>` = "*", recv_buf_size\: :ref:`int<class_int>` = 65536\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_bind>`

Binds this **PacketPeerUDP** to the specified ``port`` and ``bind_address`` with a buffer size ``recv_buf_size``, allowing it to receive incoming packets.

If ``bind_address`` is set to ``"*"`` (default), the peer will be bound on all available addresses (both IPv4 and IPv6).

If ``bind_address`` is set to ``"0.0.0.0"`` (for IPv4) or ``"::"`` (for IPv6), the peer will be bound to all available addresses matching that IP type.

If ``bind_address`` is set to any valid address (e.g. ``"192.168.1.101"``, ``"::1"``, etc.), the peer will only be bound to the interface with that address (or fail if no interface with the given address exists).

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_close:

.. rst-class:: classref-method

|void| **close**\ (\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_close>`

é—œé–‰è©² **PacketPeerUDP** åº•å±¤ UDP é€šè¨Šç«¯ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_connect_to_host:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **connect_to_host**\ (\ host\: :ref:`String<class_String>`, port\: :ref:`int<class_int>`\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_connect_to_host>`

å‘¼å«è©²æ–¹æ³•å°‡è©² UDP å°ç­‰é«”é€£æ¥åˆ°çµ¦å®šçš„ ``host``/``port`` å°ã€‚UDP å¯¦éš›ä¸Šæ˜¯ä¸éœ€é€£ç·šçš„ï¼Œå› æ­¤è©²é¸é …åƒ…æ„å‘³è‘—è‡ªå‹•ä¸Ÿæ£„ä¾†è‡ªä¸åŒä½å€çš„å‚³å…¥å°åŒ…ï¼Œä¸¦ä¸”å‚³å‡ºçš„å°åŒ…å§‹çµ‚ç™¼é€åˆ°é€£æ¥çš„ä½å€ï¼ˆä¸å…è¨±å°‡ä¾†å‘¼å« :ref:`set_dest_address()<class_PacketPeerUDP_method_set_dest_address>`\ ï¼‰ã€‚è©²æ–¹æ³•ä¸æœƒå‘é ç«¯å°ç­‰é«”ç™¼é€ä»»ä½•è³‡æ–™ï¼Œè¦ç™¼é€è³‡æ–™ï¼Œè«‹åƒå¾€å¸¸ä¸€æ¨£ä½¿ç”¨ :ref:`PacketPeer.put_var()<class_PacketPeer_method_put_var>` æˆ– :ref:`PacketPeer.put_packet()<class_PacketPeer_method_put_packet>`\ ã€‚å¦è«‹åƒé–± :ref:`UDPServer<class_UDPServer>`\ ã€‚

\ **æ³¨æ„ï¼š**\ é€£æ¥åˆ°é ç«¯å°ç­‰é«”ä¸¦ä¸èƒ½é˜²æ­¢ IP æ¬ºé¨™ç­‰æƒ¡æ„æ”»æ“Šã€‚å¦‚æœä½ è¦ºå¾—ä½ çš„å¥—ç”¨ç¨‹å¼æ­£åœ¨å‚³è¼¸æ•æ„Ÿè³‡è¨Šï¼Œå¯ä»¥è€ƒæ…®ä½¿ç”¨ TLS æˆ– DTLS ç­‰åŠ å¯†æŠ€è¡“ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_get_local_port:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_local_port**\ (\ ) |const| :ref:`ğŸ”—<class_PacketPeerUDP_method_get_local_port>`

è¿”å›è©²å°ç­‰é«”ç¶å®šåˆ°çš„æœ¬åœ°åŸ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_get_packet_ip:

.. rst-class:: classref-method

:ref:`String<class_String>` **get_packet_ip**\ (\ ) |const| :ref:`ğŸ”—<class_PacketPeerUDP_method_get_packet_ip>`

è¿”å›ç™¼é€æœ€å¾Œä¸€å€‹å°åŒ…ï¼ˆé€šé :ref:`PacketPeer.get_packet()<class_PacketPeer_method_get_packet>` æˆ– :ref:`PacketPeer.get_var()<class_PacketPeer_method_get_var>` æ¥æ”¶ï¼‰çš„é ç¨‹å°ç­‰é«”çš„ IPã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_get_packet_port:

.. rst-class:: classref-method

:ref:`int<class_int>` **get_packet_port**\ (\ ) |const| :ref:`ğŸ”—<class_PacketPeerUDP_method_get_packet_port>`

è¿”å›ç™¼é€æœ€å¾Œä¸€å€‹å°åŒ…ï¼ˆé€šé :ref:`PacketPeer.get_packet()<class_PacketPeer_method_get_packet>` æˆ– :ref:`PacketPeer.get_var()<class_PacketPeer_method_get_var>` æ¥æ”¶ï¼‰çš„é ç«¯å°ç­‰æ–¹çš„åŸ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_is_bound:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **is_bound**\ (\ ) |const| :ref:`ğŸ”—<class_PacketPeerUDP_method_is_bound>`

è¿”å›è©² **PacketPeerUDP** æ˜¯å¦è¢«ç¶å®šåˆ°æŸå€‹ä½å€ä¸Šï¼Œä¸¦ä¸”å¯ä»¥æ¥æ”¶å°åŒ…ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_is_socket_connected:

.. rst-class:: classref-method

:ref:`bool<class_bool>` **is_socket_connected**\ (\ ) |const| :ref:`ğŸ”—<class_PacketPeerUDP_method_is_socket_connected>`

å¦‚æœ UDP é€šè¨Šç«¯å·²æ‰“é–‹ä¸¦å·²é€£æ¥åˆ°é ç«¯ä½å€ï¼Œå‰‡è¿”å› ``true``\ ã€‚è¦‹ :ref:`connect_to_host()<class_PacketPeerUDP_method_connect_to_host>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_join_multicast_group:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **join_multicast_group**\ (\ multicast_address\: :ref:`String<class_String>`, interface_name\: :ref:`String<class_String>`\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_join_multicast_group>`

ä½¿ç”¨ç”± ``interface_name`` æ¨™è­˜çš„ä»‹é¢åŠ å…¥ç”± ``multicast_address`` æŒ‡å®šçš„å¤šæ’­çµ„ã€‚

å¯ä»¥ä½¿ç”¨å¤šå€‹ä»‹é¢åŠ å…¥åŒä¸€å€‹å¤šæ’­çµ„ã€‚ä½¿ç”¨ :ref:`IP.get_local_interfaces()<class_IP_method_get_local_interfaces>` ç­è§£å“ªäº›ä»‹é¢å¯ç”¨ã€‚

\ **æ³¨æ„ï¼š**\ æŸäº› Android è£ç½®å¯èƒ½éœ€è¦ ``CHANGE_WIFI_MULTICAST_STATE`` è¨±å¯æ¬Šæ‰èƒ½é€²è¡Œå¤šæ’­ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_leave_multicast_group:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **leave_multicast_group**\ (\ multicast_address\: :ref:`String<class_String>`, interface_name\: :ref:`String<class_String>`\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_leave_multicast_group>`

å¾ ``multicast_address`` æŒ‡å®šçš„çµ„æ’­çµ„ä¸­ç§»é™¤ ``interface_name`` æ¨™è­˜çš„ä»‹é¢ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_set_broadcast_enabled:

.. rst-class:: classref-method

|void| **set_broadcast_enabled**\ (\ enabled\: :ref:`bool<class_bool>`\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_set_broadcast_enabled>`

å•Ÿç”¨æˆ–ç¦ç”¨å»£æ’­å°åŒ…çš„ç™¼é€ï¼ˆä¾‹å¦‚ï¼š\ ``set_dest_address("255.255.255.255", 4343)``\ ã€‚é€™å€‹é¸é …åœ¨é è¨­æƒ…æ³ä¸‹æ˜¯ç¦ç”¨çš„ã€‚

\ **æ³¨æ„ï¼š**\ ä¸€äº› Android è£ç½®å¯èƒ½éœ€è¦ ``CHANGE_WIFI_MULTICAST_STATE`` è¨±å¯æ¬Šå’Œæœ¬é¸é …è¢«å•Ÿç”¨ä¾†æ¥æ”¶å»£æ’­åŒ…ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_set_dest_address:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **set_dest_address**\ (\ host\: :ref:`String<class_String>`, port\: :ref:`int<class_int>`\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_set_dest_address>`

è¨­å®šç™¼é€å°åŒ…å’Œè®Šæ•¸çš„ç›®æ¨™ä½å€å’ŒåŸ ã€‚å¦‚æœéœ€è¦ï¼Œå°‡ä½¿ç”¨ DNS è§£æä¸»æ©Ÿåç¨±ã€‚

\ **æ³¨æ„ï¼š**\ åœ¨å‘å»£æ’­åœ°å€ï¼ˆä¾‹å¦‚ï¼š\ ``255.255.255.255``\ ï¼‰ç™¼é€å°åŒ…ä¹‹å‰ï¼Œå¿…é ˆå•Ÿç”¨ :ref:`set_broadcast_enabled()<class_PacketPeerUDP_method_set_broadcast_enabled>`\ ã€‚

.. rst-class:: classref-item-separator

----

.. _class_PacketPeerUDP_method_wait:

.. rst-class:: classref-method

:ref:`Error<enum_@GlobalScope_Error>` **wait**\ (\ ) :ref:`ğŸ”—<class_PacketPeerUDP_method_wait>`

Waits for a packet to arrive on the bound address. See :ref:`bind()<class_PacketPeerUDP_method_bind>`.

\ **Note:** :ref:`wait()<class_PacketPeerUDP_method_wait>` can't be interrupted once it has been called. This can be worked around by allowing the other party to send a specific "death pill" packet like this:


.. tabs::

 .. code-tab:: gdscript

    socket = PacketPeerUDP.new()
    # Server
    socket.set_dest_address("127.0.0.1", 789)
    socket.put_packet("Time to stop".to_ascii_buffer())

    # Client
    while socket.wait() == OK:
        var data = socket.get_packet().get_string_from_ascii()
        if data == "Time to stop":
            return

 .. code-tab:: csharp

    var socket = new PacketPeerUdp();
    // Server
    socket.SetDestAddress("127.0.0.1", 789);
    socket.PutPacket("Time to stop".ToAsciiBuffer());

    // Client
    while (socket.Wait() == OK)
    {
        string data = socket.GetPacket().GetStringFromASCII();
        if (data == "Time to stop")
        {
            return;
        }
    }



.. |virtual| replace:: :abbr:`virtual (æœ¬æ–¹æ³•é€šå¸¸éœ€è¦ä½¿ç”¨è€…è¦†å¯«æ‰èƒ½ç”Ÿæ•ˆã€‚)`
.. |required| replace:: :abbr:`required (This method is required to be overridden when extending its base class.)`
.. |const| replace:: :abbr:`const (æœ¬æ–¹æ³•æ²’æœ‰å‰¯ä½œç”¨ã€‚ä¸æœƒä¿®æ”¹è©²å¯¦ä¾‹çš„ä»»ä½•æˆå“¡è®Šæ•¸ã€‚)`
.. |vararg| replace:: :abbr:`vararg (æœ¬æ–¹æ³•é™¤äº†é€™è£¡æè¿°çš„åƒæ•¸å¤–ï¼Œé‚„å¯ä»¥æ¥å—ä»»æ„æ•¸é‡çš„åƒæ•¸ã€‚)`
.. |constructor| replace:: :abbr:`constructor (æœ¬æ–¹æ³•ç”¨æ–¼å»ºæ§‹ä¸€å€‹å‹åˆ¥ã€‚)`
.. |static| replace:: :abbr:`static (æœ¬æ–¹æ³•ç„¡éœ€å¯¦ä¾‹å³å¯å‘¼å«ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨é¡åˆ¥åç¨±å‘¼å«ã€‚)`
.. |operator| replace:: :abbr:`operator (æœ¬æ–¹æ³•æè¿°å°‡æœ¬å‹åˆ¥ä½œç‚ºå·¦é‹ç®—å…ƒæ™‚å¯ç”¨çš„æœ‰æ•ˆé‹ç®—å­ã€‚)`
.. |bitfield| replace:: :abbr:`BitField (æ­¤å€¼æ˜¯ç”±ä¸‹åˆ—æ——æ¨™çµ„æˆçš„ä½å…ƒé®ç½©æ•´æ•¸ã€‚)`
.. |void| replace:: :abbr:`void (ç„¡å›å‚³å€¼ã€‚)`
